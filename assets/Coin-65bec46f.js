import{D as x,r as o,j as e,y as z,s as L,u as m,l as Y,n as N,p as $,F as G,L as q}from"./index-50a6ab0b.js";/* empty css               */import{C as J}from"./Currency-4e2950d3.js";import{p as R}from"./productListSelectors-09c19fbf.js";import{y as K,a as Q,b as Z,c as ee}from"./yupFormSchemas-76fae83e.js";import{I as se}from"./InputFormItem-42b2bd50.js";import{D as te}from"./Dates-6c3c1445.js";import{B as ae}from"./ButtonIcon-cf79234f.js";import{u as re}from"./useDispatch-6013e209.js";import"./v4-4a60fe23.js";const p=s=>s.record.form,ie=x([p],s=>s.record),oe=x([p],s=>!!s.initLoading),ce=x([p],s=>!!s.saveLoading),ne=x([p],s=>!!s.showtime),le=x([p],s=>!!s.showprofit),de=x([p],s=>s.error),ue=x([p],s=>s.time),he=x([p],s=>s.profit),g={selectInitLoading:oe,selectSaveLoading:ce,selectRecord:ie,selectError:de,selectShowTime:ne,selectTime:ue,selectProfit:he,selectShowProfit:le,selectRaw:p};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var w=function(s,r){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var t in i)i.hasOwnProperty(t)&&(a[t]=i[t])},w(s,r)};function me(s,r){w(s,r);function a(){this.constructor=s}s.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var pe=100,fe=100,E=50,k=50,C=50;function I(s){var r=s.className,a=s.counterClockwise,i=s.dashRatio,t=s.pathRadius,c=s.strokeWidth,l=s.style;return o.createElement("path",{className:r,style:Object.assign({},l,_e({pathRadius:t,dashRatio:i,counterClockwise:a})),d:xe({pathRadius:t,counterClockwise:a}),strokeWidth:c,fillOpacity:0})}function xe(s){var r=s.pathRadius,a=s.counterClockwise,i=r,t=a?1:0;return`
      M `+k+","+C+`
      m 0,-`+i+`
      a `+i+","+i+" "+t+" 1 1 0,"+2*i+`
      a `+i+","+i+" "+t+" 1 1 0,-"+2*i+`
    `}function _e(s){var r=s.counterClockwise,a=s.dashRatio,i=s.pathRadius,t=Math.PI*2*i,c=(1-a)*t;return{strokeDasharray:t+"px "+t+"px",strokeDashoffset:(r?-c:c)+"px"}}var ge=function(s){me(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},r.prototype.getPathRadius=function(){return E-this.props.strokeWidth/2-this.getBackgroundPadding()},r.prototype.getPathRatio=function(){var a=this.props,i=a.value,t=a.minValue,c=a.maxValue,l=Math.min(Math.max(i,t),c);return(l-t)/(c-t)},r.prototype.render=function(){var a=this.props,i=a.circleRatio,t=a.className,c=a.classes,l=a.counterClockwise,u=a.styles,d=a.strokeWidth,f=a.text,v=this.getPathRadius(),y=this.getPathRatio();return o.createElement("svg",{className:c.root+" "+t,style:u.root,viewBox:"0 0 "+pe+" "+fe,"data-test-id":"CircularProgressbar"},this.props.background?o.createElement("circle",{className:c.background,style:u.background,cx:k,cy:C,r:E}):null,o.createElement(I,{className:c.trail,counterClockwise:l,dashRatio:i,pathRadius:v,strokeWidth:d,style:u.trail}),o.createElement(I,{className:c.path,counterClockwise:l,dashRatio:y*i,pathRadius:v,strokeWidth:d,style:u.path}),f?o.createElement("text",{className:c.text,style:u.text,x:k,y:C},f):null)},r.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},r}(o.Component);const ve=({startTime:s,onComplete:r})=>{const[a,i]=o.useState(s),[t,c]=o.useState(100);return o.useEffect(()=>{if(a<=0){r();return}const l=setInterval(()=>{i(u=>{const d=u-1,f=Math.max(d/s*100,0);return c(f),d})},1e3);return()=>clearInterval(l)},[a,s,r]),e.jsxs("div",{className:"countdown-timer",children:[e.jsx("div",{style:{width:"200px"},children:e.jsx(ge,{value:t,text:`${Math.ceil(a)}s`})}),e.jsx("div",{className:"loader"}),e.jsxs("p",{style:{color:"black"},className:"loading__text",children:[e.jsx("span",{children:"Thank you for your selection. Our system is now processing your trade with the amount and time you’ve chosen. Please be patient as we work to secure the best outcome for you."}),e.jsx("span",{children:"Your profit details will be available shortly. Hang tight, we're working for your success!"})]})]})},je=z().shape({amount:K.decimal(L("entities.product.fields.amount"),{required:!0})});function ye(s){const r=re(),[a,i]=o.useState(!1),[t,c]=o.useState({}),[l,u]=o.useState([]),d=m(R.selectRows),f=m(R.selectLoading),v=m(g.selectSaveLoading),y=m(Y.selectCurrentUser);o.useState(!1);const[P,T]=o.useState(),[h,B]=o.useState(),[D]=o.useState(te.Number()),W=async()=>{try{r($.doFindById(s.id))}catch(n){console.log(n)}};o.useEffect(()=>{(async()=>{await W()})()},[s.id,r]),o.useEffect(()=>{d&&(c(d),u(d.links||[]))},[d]),o.useEffect(()=>{!f&&t&&t.symbol&&t.symbol!==void 0&&new TradingView.widget({autosize:!0,symbol:`BINANCE:${t==null?void 0:t.symbol}USDT`,timezone:"Asia/Dubai",theme:"dark",toolbar_bg:"#f1f3f6",enable_publishing:!1,hide_ideas:!0,hide_top_toolbar:!1,hide_symbol:!0,details:!1,studies:[],container_id:"tvchart",range:!1,hide_legend:!0,hide_side_toolbar:!0,allow_symbol_change:!1,save_image:!1,do_not_store_settings:!1,backgroundColor:"",horz_touch_drag:"",vert_touch_drag:!0,extended_hours:!1,hide_ideas_button:!1,with_date_ranges:!1,hide_volume:!1,padding:"",show_popup_button:!1,studies_overrides:{},publish_source:!1,venue:!1,symbology:!1,who_trades:!1,referral_id:!1,no_referral_id:!1,fundamental:!1,percentage:!1,utm_source:!1,utm_medium:!1,utm_campaign:!1})},[f,t]);const b=Q({resolver:Z.yupResolver(je),mode:"all"}),_=async(n,j)=>{await T(n),await B(j)},O=m(g.selectError),V=m(g.selectShowTime),F=m(g.selectShowProfit),A=m(g.selectTime),H=m(g.selectProfit),S=async n=>{n.number=D,n.user=y.id,n.profit=P,n.coin=t==null?void 0:t.name,n.price=t==null?void 0:t.price,n.time=h;const j=parseFloat(n.amount)*(parseFloat(n.profit)/100);try{await r(N.doCreate(n,h,j)),i(!1)}catch(X){console.error("Error dispatching action:",X)}},M=()=>{r(N.doChangeStatus())},U=()=>{r(N.docloseProft())};return o.useEffect(()=>{},[P,O,h]),e.jsxs("div",{children:[!f&&t&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5,justifyContent:"space-between",marginTop:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:t.iconUrl,style:{width:40,height:40},alt:"coin icon"}),e.jsxs("div",{children:[e.jsx("p",{children:t.name}),e.jsx("p",{style:{fontSize:12},children:t.symbol})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",textAlign:"end"},children:[e.jsxs("h3",{children:["$ ",J.formatNumber(t==null?void 0:t.price)]}),e.jsx("div",{className:"live",children:e.jsx("p",{children:"Live"})})]})]}),e.jsx("br",{}),e.jsx("div",{className:"tradingview-widget-container",id:"tvchart",style:{width:"100%",height:460}}),e.jsx("br",{}),e.jsxs("div",{className:"pricedetaill",children:[e.jsxs("div",{className:"coins__detail",children:[e.jsxs("p",{children:["About ",t.name]}),e.jsx("div",{className:"box__detail",children:e.jsx("p",{className:"news__p",dangerouslySetInnerHTML:{__html:t.description||""}})})]}),e.jsxs("div",{className:"coins__detail",children:[e.jsx("p",{children:"Links"}),e.jsx("div",{className:"box__detail",children:l.length>0?l.map((n,j)=>e.jsxs("div",{style:{display:"flex",paddingBottom:10,justifyContent:"space-between"},children:[e.jsx("div",{children:e.jsx("p",{children:n.type})}),e.jsx("a",{href:n.url,style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer",children:e.jsx("i",{className:"fas fa-link",style:{color:"white"}})})]},j)):e.jsx("p",{children:"No links available"})})]}),e.jsxs("div",{className:"coins__detail",children:[e.jsx("p",{children:"Social"}),e.jsx("div",{className:"box__detail",children:e.jsx("p",{className:"news__p",dangerouslySetInnerHTML:{__html:t.description||""}})})]})]}),e.jsxs("div",{className:"buysell",children:[e.jsx("div",{className:"buy",onClick:()=>i(!0),children:"BUY UP"}),e.jsx("div",{className:"sell",onClick:()=>i(!0),children:"BUY DOWN"})]})]}),a&&e.jsxs("div",{className:"modal__time",children:[e.jsxs("div",{className:"confirmation",children:[e.jsx("div",{className:"order",children:"Order confirmation"}),e.jsx("div",{children:e.jsx("i",{className:"fa fa-close",onClick:()=>i(!1),style:{fontSize:"24px"}})})]}),e.jsx(ee,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(S),style:{width:"100%"},children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"timing__",children:[e.jsxs("div",{className:"time__div",children:[e.jsx("div",{onClick:()=>_(20,60),className:h===60?"timer__active":"",children:"60s"}),e.jsx("div",{onClick:()=>_(20,90),className:h===90?"timer__active":"",children:"90s"}),e.jsx("div",{onClick:()=>_(45,120),className:h===120?"timer__active":"",children:"120s"})]}),e.jsxs("div",{className:"time__div",children:[e.jsx("div",{onClick:()=>_(60,180),className:h===180?"timer__active":"",children:"180s"}),e.jsx("div",{onClick:()=>_(60,360),className:h===360?"timer__active":"",children:"360s"}),e.jsx("div",{onClick:()=>_(60,480),className:h===480?"timer__active":"",children:"480s"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("span",{className:"exchnage",children:"Number of lots to exchange:"}),e.jsx(se,{type:"text",name:"amount",placeholder:L("entities.transaction.fields.amount"),className:"input__withdraw"})]})]}),e.jsxs("div",{className:"modal__button",children:[e.jsx("div",{className:"button__close",onClick:()=>i(!1),children:"Close"}),e.jsxs("button",{className:"button__confirm",onClick:b.handleSubmit(S),disabled:v,children:[e.jsx(ae,{loading:v}),e.jsx("span",{children:"Confirm"})]})]})]})})]}),V&&e.jsx(ve,{startTime:A,onComplete:M}),F&&e.jsxs("div",{className:"countdown-timer flex",children:[e.jsx("div",{className:"profit__close",onClick:()=>U(),children:e.jsx("i",{className:"fa fa-close"})}),e.jsxs("div",{className:"profit-content",children:[e.jsx("h3",{className:"title__profit",children:"Congratulations!"}),e.jsx("p",{className:"message__profit",children:"Your trade has been successfully processed."}),e.jsx("p",{className:"message__profit",children:"Here’s your profit:"}),e.jsxs("p",{className:"total__profit",children:["$",H.toFixed(2)]})]})]})]})}function Le(){const{id:s}=G(),[r,a]=o.useState("price");return o.useState(""),e.jsxs("div",{children:[e.jsxs("div",{className:"header__page",children:[e.jsx("div",{children:e.jsx(q,{to:"/",children:e.jsx("i",{className:"fas fa-long-arrow-alt-left",style:{color:"white"}})})}),e.jsx("div",{className:"page__name",children:e.jsx("span",{children:"Currency Detail"})}),e.jsx("div",{})]}),e.jsx("div",{className:"coins__content",children:r==="price"&&e.jsx(ye,{id:s})})]})}export{Le as default};
